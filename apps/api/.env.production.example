# =============================================================================
# Amauta API - Production Environment Variables
# =============================================================================
#
# ⚠️ IMPORTANTE - SEGURIDAD:
# Este es un archivo de EJEMPLO que SÍ se sube al repositorio público.
# Los valores reales deben estar en .env.production.local (NO se sube al repo)
#
# Para deployment en producción:
# 1. Copiar este archivo: cp .env.production.example .env.production.local
# 2. Reemplazar todos los valores con datos REALES
# 3. NUNCA commitear .env.production.local (está en .gitignore)
# =============================================================================

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------
NODE_ENV=production
API_PORT=3001
API_HOST=0.0.0.0
# URL pública de tu API (configurar en Dokploy/VPS)
API_URL=https://api.tu-dominio.com

# -----------------------------------------------------------------------------
# Database
# -----------------------------------------------------------------------------
# Conexión a PostgreSQL en producción
# ⚠️ Usar valores reales del VPS en .env.production.local
DATABASE_URL=postgresql://usuario:password@host:5432/amauta_prod

# Pool de conexiones (ajustar según recursos del VPS)
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# -----------------------------------------------------------------------------
# Security - JWT & Sessions
# -----------------------------------------------------------------------------
# ⚠️ CRÍTICO: Generar secrets seguros de al menos 32 caracteres
# Comando: openssl rand -base64 32
JWT_SECRET=CAMBIAR-generar-con-openssl-rand-base64-32-caracteres-minimo
JWT_EXPIRES_IN=7d
SESSION_SECRET=CAMBIAR-otro-secret-diferente-para-sesiones

# NextAuth (si usas NextAuth.js)
NEXTAUTH_SECRET=CAMBIAR-mismo-secret-que-en-frontend

# -----------------------------------------------------------------------------
# CORS - Configurar dominios permitidos
# -----------------------------------------------------------------------------
# Dominio del frontend en producción
CORS_ORIGIN=https://tu-dominio.com,https://www.tu-dominio.com

# -----------------------------------------------------------------------------
# Redis (Caché y Sesiones) - OPCIONAL
# -----------------------------------------------------------------------------
# Si usas Redis en VPS (recomendado para producción)
# REDIS_URL=redis://:password@host:6379
# REDIS_CACHE_TTL=3600

# -----------------------------------------------------------------------------
# File Uploads
# -----------------------------------------------------------------------------
# Directorio para uploads en el VPS
UPLOAD_DIR=/app/uploads
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp,application/pdf

# -----------------------------------------------------------------------------
# Email - SMTP (Producción)
# -----------------------------------------------------------------------------
# Configurar con proveedor real (Gmail, SendGrid, Mailgun, etc.)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=tu-email@gmail.com
# SMTP_PASSWORD=tu-app-password-de-gmail
# SMTP_FROM=noreply@tu-dominio.com

# -----------------------------------------------------------------------------
# Logs
# -----------------------------------------------------------------------------
LOG_LEVEL=info
LOG_FORMAT=json

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
# Más estricto en producción
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000

# -----------------------------------------------------------------------------
# Cloudflare (si usas)
# -----------------------------------------------------------------------------
# CLOUDFLARE_ACCOUNT_ID=tu-account-id
# CLOUDFLARE_API_TOKEN=tu-api-token

# -----------------------------------------------------------------------------
# Monitoring & Error Tracking (OPCIONAL)
# -----------------------------------------------------------------------------
# Sentry para tracking de errores
# SENTRY_DSN=https://xxx@sentry.io/xxx

# -----------------------------------------------------------------------------
# Feature Flags (OPCIONAL)
# -----------------------------------------------------------------------------
ENABLE_SWAGGER=false
ENABLE_DEBUG_MODE=false

# =============================================================================
# DEPLOYMENT NOTES
# =============================================================================
#
# En Dokploy:
# 1. Ir a la aplicación → Environment Variables
# 2. Pegar las variables con valores REALES (no estos ejemplos)
# 3. NUNCA exponer estas variables en logs o capturas de pantalla
#
# En VPS directo:
# 1. Crear /root/amauta/.env.production.local
# 2. Copiar y ajustar valores
# 3. Referenciar en docker-compose.yml: env_file: .env.production.local
#
# Rotación de secrets:
# - Cambiar JWT_SECRET y SESSION_SECRET cada 3-6 meses
# - Cambiar DATABASE_URL password cada 6-12 meses
# - Documentar cambios en changelog privado (no en repo público)
# =============================================================================
